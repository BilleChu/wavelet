# Stock Quote Collector Configuration
# ====================================
# EastMoney A股行情采集器配置

collector_id: "eastmoney_stock_quote"
name: "EastMoney A股行情"
source: "eastmoney"
data_type: "stock_quote"
frequency: "daily"

# HTTP Request Configuration
request:
  method: "GET"
  url: "http://push2.eastmoney.com/api/qt/clist/get"
  headers:
    User-Agent: "Mozilla/5.0"
    Referer: "http://quote.eastmoney.com/"
  params:
    pn: 1
    pz: 500
    po: 1
    np: 1
    fltt: 2
    invt: 2
    fid: "f3"
    fs: "m:0+t:6,m:0+t:80,m:1+t:2,m:1+t:23"
    fields: "f12,f14,f2,f3,f4,f5,f6,f7,f15,f16,f17,f18"
  timeout: 30.0

# Authentication (none required for this endpoint)
auth:
  type: "none"

# Response Parser Configuration
parser:
  data_path: "data.diff"
  error_path: "message"

# Field Mapping Configuration
# Format: source_field: target_field or source_field: {target: field, type: type}
field_mapping:
  f12:
    target: "code"
    type: "string"
  f14:
    target: "name"
    type: "string"
  f2:
    target: "close"
    type: "float"
  f3:
    target: "change_pct"
    type: "float"
  f4:
    target: "change"
    type: "float"
  f5:
    target: "volume"
    type: "integer"
  f6:
    target: "amount"
    type: "float"
  f7:
    target: "amplitude"
    type: "float"
  f15:
    target: "high"
    type: "float"
  f16:
    target: "low"
    type: "float"
  f17:
    target: "open"
    type: "float"
  f18:
    target: "pre_close"
    type: "float"

# Required fields for validation
required_fields:
  - "code"
  - "close"

# Deduplication Configuration
dedup_keys:
  - "code"
  - "trade_date"
dedup_enabled: true

# Rate Limiting
rate_limit: 10.0
max_retries: 3
retry_delay: 1.0

# Metadata
metadata:
  description: "A股日线行情数据采集"
  update_time: "每日收盘后"
