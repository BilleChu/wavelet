version: "1.0"
metadata:
  namespace: openfinance
  description: OpenFinance 关系类型定义

relation_types:
  belongs_to:
    display_name: 属于
    category: classification
    description: 实体归属关系
    version: "1.0.0"
    
    source_types: [company, stock]
    target_types: [industry, sector]
    
    properties:
      primary:
        type: boolean
        default: true
        description: 是否主要归属
        
      confidence:
        type: decimal
        precision: 3
        scale: 2
        min: 0
        max: 1
        description: 置信度

  has_concept:
    display_name: 具有概念
    category: classification
    description: 实体概念关联
    version: "1.0.0"
    
    source_types: [company, stock]
    target_types: [concept]
    
    properties:
      relevance:
        type: decimal
        precision: 3
        scale: 2
        description: 相关度
        
      mentioned_count:
        type: integer
        description: 提及次数

  competes_with:
    display_name: 竞争
    category: business
    description: 公司竞争关系
    version: "1.0.0"
    
    source_types: [company, stock]
    target_types: [company, stock]
    symmetric: true
    
    properties:
      market:
        type: string
        description: 竞争市场
        
      intensity:
        type: enum
        values: [high, medium, low]
        description: 竞争强度

  supplies_to:
    display_name: 供应
    category: business
    description: 供应链关系
    version: "1.0.0"
    
    source_types: [company, stock]
    target_types: [company, stock]
    
    properties:
      product:
        type: string
        description: 供应产品
        
      revenue_ratio:
        type: decimal
        precision: 5
        scale: 2
        description: 收入占比

  invests_in:
    display_name: 投资
    category: business
    description: 投资关系
    version: "1.0.0"
    
    source_types: [investor, fund, company]
    target_types: [company, stock]
    
    properties:
      shares:
        type: decimal
        description: 持股数量
        
      ratio:
        type: decimal
        precision: 5
        scale: 2
        description: 持股比例
        
      as_of_date:
        type: date
        description: 数据日期

  works_for:
    display_name: 任职
    category: personnel
    description: 任职关系
    version: "1.0.0"
    
    source_types: [person]
    target_types: [company]
    
    properties:
      title:
        type: string
        description: 职位
        
      start_date:
        type: date
        description: 入职日期
        
      end_date:
        type: date
        description: 离职日期
        
      is_current:
        type: boolean
        default: true
        description: 是否在职

  manages:
    display_name: 管理
    category: personnel
    description: 管理关系
    version: "1.0.0"
    
    source_types: [person]
    target_types: [company]
    
    properties:
      role:
        type: enum
        values: [ceo, cfo, cto, chairman, director, supervisor]
        description: 角色

  parent_of:
    display_name: 母公司
    category: corporate
    description: 母子公司关系
    version: "1.0.0"
    
    source_types: [company]
    target_types: [company]
    
    properties:
      ownership_ratio:
        type: decimal
        precision: 5
        scale: 2
        description: 持股比例

  subsidiary_of:
    display_name: 子公司
    category: corporate
    description: 子公司关系
    version: "1.0.0"
    
    source_types: [company]
    target_types: [company]

  acquired:
    display_name: 收购
    category: corporate
    description: 收购关系
    version: "1.0.0"
    
    source_types: [company]
    target_types: [company]
    
    properties:
      deal_date:
        type: date
        description: 交易日期
        
      deal_value:
        type: decimal
        description: 交易金额
        
      deal_type:
        type: enum
        values: [full, partial, asset]
        description: 交易类型

  affects:
    display_name: 影响
    category: impact
    description: 影响关系
    version: "1.0.0"
    
    source_types: [event]
    target_types: [company, stock, industry, index]
    
    properties:
      impact_type:
        type: enum
        values: [positive, negative, neutral]
        description: 影响类型
        
      impact_score:
        type: decimal
        precision: 3
        scale: 2
        description: 影响程度

  listed_on:
    display_name: 上市于
    category: market
    description: 上市关系
    version: "1.0.0"
    
    source_types: [company, stock]
    target_types: [index]
    
    properties:
      weight:
        type: decimal
        description: 权重
        
      added_date:
        type: date
        description: 纳入日期

  related_to:
    display_name: 相关
    category: general
    description: 通用相关关系
    version: "1.0.0"
    
    source_types: [company, stock, industry, concept, person, event, fund, index, investor, sector]
    target_types: [company, stock, industry, concept, person, event, fund, index, investor, sector]
    symmetric: true
    
    properties:
      relation_source:
        type: string
        description: 关系来源
        
      confidence:
        type: decimal
        precision: 3
        scale: 2
        description: 置信度
